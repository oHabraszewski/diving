[gd_scene load_steps=30 format=2]

[ext_resource path="res://elements/terrainv2/Terrain.tscn" type="PackedScene" id=1]
[ext_resource path="res://main.gd" type="Script" id=2]
[ext_resource path="res://elements/player/nurek.tscn" type="PackedScene" id=3]
[ext_resource path="res://assets/Bariol_Regular_Webfont.ttf" type="DynamicFontData" id=4]
[ext_resource path="res://Air.gd" type="Script" id=5]
[ext_resource path="res://assets/background.png" type="Texture" id=6]
[ext_resource path="res://assets/kill_screen_background.png" type="Texture" id=7]
[ext_resource path="res://assets/theme.tres" type="Theme" id=8]
[ext_resource path="res://assets/zawor.png" type="Texture" id=9]
[ext_resource path="res://Interface.gd" type="Script" id=10]
[ext_resource path="res://assets/coin.png" type="Texture" id=11]
[ext_resource path="res://ParallaxBackground.gd" type="Script" id=12]
[ext_resource path="res://NetworkNode.gd" type="Script" id=13]

[sub_resource type="SegmentShape2D" id=1]
a = Vector2( -150, 0 )
b = Vector2( 150, 0 )

[sub_resource type="OpenSimplexNoise" id=2]
octaves = 5
period = 39.6
persistence = 0.991
lacunarity = 2.07

[sub_resource type="NoiseTexture" id=3]
seamless = true
as_normalmap = true
noise = SubResource( 2 )

[sub_resource type="Gradient" id=4]
offsets = PoolRealArray( 0, 0.323194 )
colors = PoolColorArray( 0.47451, 0.678431, 1, 1, 1, 1, 1, 1 )

[sub_resource type="GradientTexture" id=5]
gradient = SubResource( 4 )

[sub_resource type="RectangleShape2D" id=6]
extents = Vector2( 117.228, 22 )

[sub_resource type="RectangleShape2D" id=7]
extents = Vector2( 149.227, 1164.77 )

[sub_resource type="StyleBoxFlat" id=8]
bg_color = Color( 1, 0, 0, 1 )
border_width_left = 10
border_width_top = 10
border_width_right = 10
border_width_bottom = 10
border_color = Color( 0, 0, 0, 1 )
border_blend = true
corner_radius_top_right = 400
corner_radius_bottom_right = 400

[sub_resource type="DynamicFont" id=9]
size = 48
font_data = ExtResource( 4 )

[sub_resource type="DynamicFont" id=10]
size = 64
outline_size = 1
outline_color = Color( 0.0627451, 0.192157, 0.192157, 1 )
extra_spacing_char = 2
font_data = ExtResource( 4 )

[sub_resource type="Animation" id=11]
tracks/0/type = "value"
tracks/0/path = NodePath("Control2/Panel/ProgressBar:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.133278, 0.242562, 0.338884, 0.46551 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1 ),
"update": 0,
"values": [ Color( 1, 1, 1, 1 ), Color( 0.768627, 0, 0, 1 ), Color( 1, 1, 1, 1 ), Color( 0.776471, 0, 0, 1 ), Color( 1, 1, 1, 1 ) ]
}

[sub_resource type="DynamicFont" id=12]
size = 100
outline_size = 1
outline_color = Color( 0.0627451, 0.192157, 0.192157, 1 )
extra_spacing_char = 2
font_data = ExtResource( 4 )

[sub_resource type="DynamicFont" id=13]
size = 38
outline_size = 1
outline_color = Color( 0.0627451, 0.192157, 0.192157, 1 )
extra_spacing_char = 2
font_data = ExtResource( 4 )

[sub_resource type="Gradient" id=14]
offsets = PoolRealArray( 0, 0.413284, 1 )
colors = PoolColorArray( 0.976471, 1, 0.74902, 1, 0.779671, 0.931373, 0.810582, 1, 0.211765, 0.733333, 0.988235, 1 )

[sub_resource type="GradientTexture" id=15]
gradient = SubResource( 14 )

[sub_resource type="Animation" id=16]
tracks/0/type = "value"
tracks/0/path = NodePath("../Game/Air/Polygon2DWater_if_in_air:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Color( 1, 1, 1, 0 ), Color( 1, 1, 1, 0.929412 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("Sprite2:modulate")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0.3, 1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Color( 1, 1, 1, 0 ), Color( 1, 1, 1, 1 ) ]
}
tracks/2/type = "value"
tracks/2/path = NodePath("Sprite:modulate")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"times": PoolRealArray( 0, 0.7 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Color( 1, 1, 1, 1 ), Color( 1, 1, 1, 0 ) ]
}
tracks/3/type = "value"
tracks/3/path = NodePath("../Game/Air/Polygon2DAir:modulate")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/keys = {
"times": PoolRealArray( 0, 1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Color( 1, 1, 1, 0.929412 ), Color( 1, 1, 1, 0 ) ]
}

[node name="Node2D" type="Node2D"]
script = ExtResource( 2 )

[node name="Game" type="CanvasLayer" parent="."]
layer = 2
follow_viewport_enable = true

[node name="Air" type="Node2D" parent="Game"]
script = ExtResource( 5 )

[node name="Area2D" type="KinematicBody2D" parent="Game/Air"]
position = Vector2( 0, -10 )
collision_layer = 262144

[node name="CollisionShape2D" type="CollisionShape2D" parent="Game/Air/Area2D"]
shape = SubResource( 1 )

[node name="Polygon2D" type="Polygon2D" parent="Game/Air"]
position = Vector2( 0, 1000 )
color = Color( 0.486275, 0.172549, 0.172549, 1 )
polygon = PoolVector2Array( 4000, 1000, -4000, 1000, -4000, 2000, 4000, 2000 )

[node name="Polygon2DWater_if_in_air" type="Polygon2D" parent="Game/Air"]
modulate = Color( 1, 1, 1, 0 )
position = Vector2( 163.684, -981.044 )
z_index = 40
color = Color( 0.0784314, 0.301961, 0.690196, 1 )
texture = SubResource( 3 )
polygon = PoolVector2Array( 4000, 1000, -4000, 1000, -4000, 2000, 4000, 2000 )

[node name="Polygon2DAir" type="Polygon2D" parent="Game/Air"]
modulate = Color( 1, 1, 1, 0.929412 )
position = Vector2( 201.739, -1981.17 )
texture = SubResource( 5 )
texture_rotation_degrees = 90.0
polygon = PoolVector2Array( 4000, 1000, -4000, 1000, -4000, 2000, 4000, 2000 )

[node name="Area2D2" type="Area2D" parent="Game/Air"]
collision_layer = 262144

[node name="CollisionShape2D" type="CollisionShape2D" parent="Game/Air/Area2D2"]
shape = SubResource( 6 )

[node name="Area2D3" type="Area2D" parent="Game/Air"]
space_override = 1
gravity_vec = Vector2( 0, 0 )
linear_damp = 1.0
collision_layer = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Game/Air/Area2D3"]
position = Vector2( 0, 1144 )
shape = SubResource( 7 )

[node name="Player" parent="Game" instance=ExtResource( 3 )]
position = Vector2( -0.741939, 50.5951 )
z_index = 2
mode = 2
sleeping = true

[node name="Camera2D" type="Camera2D" parent="Game/Player"]
current = true
smoothing_speed = 3.0

[node name="Terrain" parent="Game" instance=ExtResource( 1 )]
position = Vector2( -612.173, 3.36365 )
segment_count_y = 20

[node name="Interface" type="CanvasLayer" parent="."]
layer = 3
script = ExtResource( 10 )

[node name="Control2" type="Control" parent="Interface"]
margin_right = 1658.0
margin_bottom = 264.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Panel" type="Panel" parent="Interface/Control2"]
margin_left = 936.881
margin_top = 41.5595
margin_right = 1556.88
margin_bottom = 188.56
custom_styles/panel = SubResource( 8 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Label" type="Label" parent="Interface/Control2/Panel"]
margin_left = 500.0
margin_top = 37.0
margin_right = 1577.0
margin_bottom = 107.0
theme = ExtResource( 8 )
custom_fonts/font = SubResource( 9 )
custom_colors/font_color = Color( 1, 1, 1, 1 )
text = "O2"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ProgressBar" type="ProgressBar" parent="Interface/Control2/Panel"]
margin_left = 12.0
margin_top = 16.0
margin_right = 498.0
margin_bottom = 134.0
theme = ExtResource( 8 )
custom_colors/font_color = Color( 1, 1, 1, 1 )
step = 1.0
value = 98.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="TextureRect" type="TextureRect" parent="Interface/Control2/Panel"]
margin_left = 616.443
margin_top = 19.6447
margin_right = 744.443
margin_bottom = 319.645
rect_scale = Vector2( 0.340021, 0.340021 )
texture = ExtResource( 9 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Control3" type="Control" parent="Interface"]
margin_left = 62.9325
margin_top = 89.8026
margin_right = 436.932
margin_bottom = 312.803
__meta__ = {
"_edit_use_anchors_": false
}

[node name="HBoxContainer" type="HBoxContainer" parent="Interface/Control3"]
margin_left = -23.0
margin_top = -36.0
margin_right = 561.0
margin_bottom = 64.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="TextureRect" type="TextureRect" parent="Interface/Control3/HBoxContainer"]
margin_right = 100.0
margin_bottom = 100.0
texture = ExtResource( 11 )

[node name="Label" type="Label" parent="Interface/Control3/HBoxContainer"]
margin_left = 104.0
margin_top = 9.0
margin_right = 300.0
margin_bottom = 91.0
theme = ExtResource( 8 )
custom_fonts/font = SubResource( 10 )
custom_colors/font_color = Color( 1, 1, 1, 1 )
text = "0 coins"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="OxygenTimer" type="Timer" parent="Interface"]
wait_time = 0.431
autostart = true

[node name="AnimationPlayer" type="AnimationPlayer" parent="Interface"]
"anims/progress bar tint" = SubResource( 11 )

[node name="Popup" type="Popup" parent="Interface"]
visible = true
margin_right = 1613.0
margin_bottom = 918.0
theme = ExtResource( 8 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="kill_screen_background" type="Sprite" parent="Interface/Popup"]
position = Vector2( 824.836, 513.256 )
texture = ExtResource( 7 )

[node name="Panel" type="Panel" parent="Interface/Popup"]
margin_right = 1603.0
margin_bottom = 901.0
theme = ExtResource( 8 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Label" type="Label" parent="Interface/Popup/Panel"]
margin_top = 296.128
margin_right = 1600.0
margin_bottom = 425.128
theme = ExtResource( 8 )
custom_fonts/font = SubResource( 12 )
custom_colors/font_color = Color( 0.0627451, 0.192157, 0.192157, 1 )
custom_colors/font_color_shadow = Color( 0.211765, 0.443137, 0.411765, 1 )
custom_constants/shadow_offset_x = 3
custom_constants/shadow_offset_y = 3
text = "You died :("
align = 1
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Label2" type="Label" parent="Interface/Popup/Panel"]
margin_top = 786.0
margin_right = 1600.0
margin_bottom = 868.0
theme = ExtResource( 8 )
custom_fonts/font = SubResource( 10 )
text = "TIP: to get oxygen swim to the top"
align = 1

[node name="Label3" type="Label" parent="Interface/Popup/Panel"]
margin_left = 669.795
margin_top = 23.3494
margin_right = 1583.79
margin_bottom = 190.349
theme = ExtResource( 8 )
custom_fonts/font = SubResource( 13 )
custom_colors/font_color = Color( 0.0627451, 0.192157, 0.192157, 1 )
text = "YOUR SCORE:
YOUR HIGHSCORE: "
align = 2
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Label4" type="Label" parent="Interface/Popup/Panel"]
margin_left = 9.59656
margin_top = 10.7503
margin_right = 923.597
margin_bottom = 177.75
theme = ExtResource( 8 )
custom_fonts/font = SubResource( 13 )
custom_colors/font_color = Color( 0.0627451, 0.192157, 0.192157, 1 )
text = "Playtime: 1:10"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Button" type="Button" parent="Interface/Popup/Panel"]
margin_left = 627.092
margin_top = 490.112
margin_right = 977.092
margin_bottom = 546.112
theme = ExtResource( 8 )
text = "Play again"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Timer" type="Timer" parent="Interface"]
process_mode = 0
autostart = true

[node name="NetworkNode" type="Node" parent="."]
script = ExtResource( 13 )

[node name="ParallaxBackground" type="CanvasLayer" parent="."]
follow_viewport_enable = true
script = ExtResource( 12 )

[node name="Sprite4" type="Sprite" parent="ParallaxBackground"]
position = Vector2( 23040, 400 )
scale = Vector2( 3, 3 )
texture = ExtResource( 6 )

[node name="Sprite3" type="Sprite" parent="ParallaxBackground"]
position = Vector2( -23040, 400 )
scale = Vector2( 3, 3 )
texture = ExtResource( 6 )

[node name="Sprite" type="Sprite" parent="ParallaxBackground"]
position = Vector2( 0, 400 )
scale = Vector2( 3, 3 )
texture = ExtResource( 6 )

[node name="Sprite2" type="Sprite" parent="ParallaxBackground"]
modulate = Color( 1, 1, 1, 0.00706724 )
position = Vector2( 417.415, -766.83 )
scale = Vector2( 3, 1571.87 )
texture = SubResource( 15 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="ParallaxBackground"]
anims/change_bck_to_air = SubResource( 16 )

[connection signal="area_entered" from="Game/Air/Area2D2" to="Game/Air" method="_on_Area2D2_area_entered"]
[connection signal="area_exited" from="Game/Air/Area2D2" to="Game/Air" method="_on_Area2D2_area_exited"]
[connection signal="bumped_into_rocks" from="Game/Player" to="Interface" method="_on_Player_bumped_into_rocks"]
[connection signal="bomb_exploded" from="Game/Terrain" to="Interface" method="_on_Terrain_bomb_exploded"]
[connection signal="bubbles_entered" from="Game/Terrain" to="Game/Air" method="player_entered_bubbles"]
[connection signal="bubbles_entered" from="Game/Terrain" to="Interface" method="bubbles_entered"]
[connection signal="bubbles_exited" from="Game/Terrain" to="Game/Air" method="player_exited_bubbles"]
[connection signal="chest_opened" from="Game/Terrain" to="Interface" method="_on_Terrain_chest_opened"]
[connection signal="timeout" from="Interface/OxygenTimer" to="Interface" method="_on_OxygenTimer_timeout"]
[connection signal="pressed" from="Interface/Popup/Panel/Button" to="Interface" method="_on_Button_pressed"]
[connection signal="timeout" from="Interface/Timer" to="Interface" method="_on_Timer_timeout"]
